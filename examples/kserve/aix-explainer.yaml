apiVersion: "serving.kserve.io/v1beta1"
kind: "InferenceService"
metadata:
  name: "aix-explainer"
  namespace: frederik-coquelet
  annotations:
    sidecar.istio.io/inject: "false"
spec:
  predictor:
    minReplicas: 0
    containers:
    - name: predictor
      image: aipipeline/rf-predictor:0.4.1
      command: ["python", "-m", "rfserver", "--model_name", "aix-explainer"]
      imagePullPolicy: Always
      resources:
          requests:
            cpu: 0.1
            memory: 1Gi       
          limits:
            cpu: 1
            memory: 1Gi
  explainer:
    minReplicas: 0
    aix:
      type: LimeImages
      config:
        num_samples: "100"
        top_labels: "10"
        min_weight: "0.01"
      resources:
        requests:
          cpu: 0.1
          memory: 6Gi       
        limits:
          cpu: 1
          memory: 6Gi