apiVersion: secrets.infisical.com/v1alpha1
kind: InfisicalSecret
metadata:
  name: tls-secret
  namespace: infisical
spec:
  hostAPI: https://infisical.kubefrog.fr
  resyncInterval: 10
  authentication:
    kubernetesAuth:
      identityId: 4e954874-bf29-48f2-8c06-44be91d9cc1e
      serviceAccountRef:
        name: infisical-auth
        namespace: default
      secretsScope:
        projectSlug: kubefrog-vps-7k-ft
        envSlug: prod
        secretsPath: "/KUBEFROG_CERTS"
        secretName: # OPTIONAL: If you want to fetch a single Infisical secret, you can specify the secret name here. If not specified, all secrets in the specified scope will be fetched.
        recursive: true

  managedKubeSecretReferences:
    - secretName: kubefrog-tls-secret
      secretNamespace: infisical
      creationPolicy: "Orphan"
      template:
        includeAllSecrets: no
        data:
          tls.crt: "{{ .KUBEFROG_TLS_CRT.Value }}"
          tls.key: "{{ .KUBEFROG_TLS_KEY.Value }}"
  
