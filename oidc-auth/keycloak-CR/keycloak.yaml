apiVersion: k8s.keycloak.org/v2alpha1
kind: Keycloak
metadata:
  name: keycloak
spec:
  DisableDefaultServiceMonitor: true
  instances: 1
  db:
    vendor: postgres
    usernameSecret:
      name: keycloak.keycloak-postgres.credentials.postgresql.acid.zalan.do
      key: username
    passwordSecret:
      name: keycloak.keycloak-postgres.credentials.postgresql.acid.zalan.do
      key: password
    host: keycloak-postgres
    database: keycloak
    port: 5432
    schema: keycloak
    poolInitialSize: 1
    poolMinSize: 1
    poolMaxSize: 3
  http:
    httpEnabled: true
    httpPort: 8180
    httpsPort: 8543
    tlsSecret: ""
  proxy:
    headers: xforwarded # double check your reverse proxy sets and overwrites the X-Forwarded-* headers
  bootstrapAdmin: 
    user: 
      secret: keycloak-secret # secret keys: username:password
  hostname:
    hostname: https://auth-kvm.kubefrog.fr
    admin: https://auth-kvm.kubefrog.fr/admin
    strict: false
    backchannelDynamic: true
  features:
    enabled:
      - authorization
  transaction:
    xaEnabled: false